<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Time goes by so fast, people go in and out of your life. You must never miss the opportunity to tell these people how much they mean to you.">
<meta property="og:type" content="website">
<meta property="og:title" content="Sourfeng Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Sourfeng Blog">
<meta property="og:description" content="Time goes by so fast, people go in and out of your life. You must never miss the opportunity to tell these people how much they mean to you.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sourfeng Blog">
<meta name="twitter:description" content="Time goes by so fast, people go in and out of your life. You must never miss the opportunity to tell these people how much they mean to you.">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Sourfeng Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Sourfeng Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Sharing technology</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/首页" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/分类" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/关于" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/归档" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/标签" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-search">
          <a href="/搜索" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            搜索
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/22/2016-Googel-I-O-—人工智能、VR、智能家居、可穿戴型都拿下/" itemprop="url">
                  2016 Googel I/O —人工智能、VR、智能家居、可穿戴型都拿下 
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-22T00:33:13+08:00" content="2016-05-22">
              2016-05-22
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://img.leikeji.com/resource/img/22cc74620f4549bd8e36bcaff34c2fef.jpg@0-0-1400-840a" alt=""></p>
<h1 id="AI、VR、智能家居、可穿戴全都拿下"><a href="#AI、VR、智能家居、可穿戴全都拿下" class="headerlink" title="AI、VR、智能家居、可穿戴全都拿下"></a>AI、VR、智能家居、可穿戴全都拿下</h1><p>Google I/O大会在全球开发者、谷歌粉丝、安卓厂商和竞争对手的翘首以盼中开幕了。I/O大会已连续举办到第9届，在历史上曾发布过Android、Chrome、ChromeBook、Nexus 7、Google Glass、Cardboard等大家耳熟能详的产品。雷小编印象最深刻的就是当年谷歌员工在I/O大会上，戴着Google Glass从天而降、抵达舞台的惊艳之举，简直不能更酷。</p>
<p>2016年的I/O大会，更是意义非凡。     </p>
<p>VR、无人车等产业新浪潮方兴未艾，而面临瓶颈的手机业则亟待老大哥Google前来指明方向…而谷歌对这一次I/O大会也是前所未有地重视，将举办地点搬到了谷歌总部的大门口：山景城的海岸线圆形剧场，并且从室内搬到了露天场地。</p>
<p>事实证明，Google又一次不负众望，满足了大家的部分期待。尽管有一些产品并未如预期到来，但谷歌用别的产品进行了弥补。</p>
<p>先来看看Google I/O大会上的重磅发布：</p>
<h3 id="Google助理：更智能的Google-Now"><a href="#Google助理：更智能的Google-Now" class="headerlink" title="Google助理：更智能的Google Now"></a>Google助理：更智能的Google Now</h3><p>或许Google 认为Google Now不够智能，无法满足人们与机器自然交互的所有需求，因此对其进行了升级，推出了Google Assistant，即谷歌助理。</p>
<p><img src="http://img.leikeji.com/resource/img/9aed1d0d4b70413f8bc459789b26605a.png" alt=""></p>
<p>谷歌已有60%的搜索来自移动设备，20%的搜索来自语音（其中国跟随者百度公布过移动搜索比例，与之相仿，但并未公布过语音搜索比例，谷歌应该领先）。谷歌助理主要针对语音搜索进行处理，其能做的事情更多，正如其名，它可以像助理一样，与你对话交互，而不再是单次的语音识别和响应。它更加聪明，能完成更多事情。除了支持安卓手机之外，谷歌助理还能应用在智能家居、智能手表、智能汽车等场景之中——依然是对标Apple Siri、Amazon Alexa（原名Echo）和微软Cortana，中国厂商百度则有度秘。</p>
<p><img src="http://img.leikeji.com/resource/img/78d9d2f149cc41ef9d542ddea277cbec.png" alt="谷歌助理 已支持的服务"><br>语音助手最先是被Apple通过Siri带到世人面前的。不得不说最初几年Siri并不算“智能”，它许多时候成为用户调戏的玩具，识别能力差，能做的事情少，能查到天气就不错了。这些年随着语音技术和人工智能技术的发展，Siri越来越聪明，能识别更多语音，能进行多轮对话，还能完成许多任务，开始有实用性了。</p>
<p>Google旗下AlphaGo战胜顶级围棋选手表明其在人工智能上的领先者地位，将AI成果与语音和搜索结合，谷歌助理未来可期。</p>
<h3 id="Google-Home：硬件版的Google助理"><a href="#Google-Home：硬件版的Google助理" class="headerlink" title="Google Home：硬件版的Google助理"></a>Google Home：硬件版的Google助理</h3><p>Google发布了全新的智能家居产品：Google Home。这是一款内置了谷歌助理的家居硬件，就像Amazon的Echo一样，它即是一款智能音箱，也是一个可购物、能开灯的硬件助理，内置了名为Alexa的语音助理软件。</p>
<p><img src="http://img.leikeji.com/resource/img/1c8851d5ed1c4461bd797eca1669eec6.png" alt=""></p>
<p>Google Home能叫出租车、订外卖，可进行语音搜索并得到语音结果，未来应该还能开灯，做饭，下片，Google Home开放给智能家居和软件服务厂商进而实现丰富的功能…总之，与Amazon Alexa思路差不多，就是让用户在家里时可从键盘和屏幕解脱出来，一边做饭一边上网，一边XXOO一边回老板邮件（好污）……</p>
<p>在此之前，Google在智能家居上进行了许多探索。</p>
<ul>
<li>2011年的I/O大会上发布了Android@Home，几无进展； </li>
<li>2012年 I/O大会上发布Nexus Q客厅娱乐中心，同样失败； </li>
<li>2013年发布电视棒ChormeCast大获成功，今年一季度市场份额已超过Apple TV，成为全美第二受欢迎的智能电视设备，第一是老牌机顶盒厂商Roku，在I/O大会上谷歌宣布ChromeCast是其卖得最多的智能家居设备； </li>
<li>2014年，Google 32亿美金大手笔收购智能家居佼佼者Nest，这家公司除了帮Google买了一个Dropcam智能摄像头之外，其余方面并无太大起色，未能承载谷歌智能家居的重托；  </li>
<li>2015年I/O大会上，Google再战智能家居，发布了Brillo智能家居端到端系统和Weave跨平台协议，希望从系统和协议层完善智能家居；</li>
</ul>
<p>现在Google Home来了，搜索起家的谷歌，在智能家居上回到搜索（语音助理本质是移动搜索），谋求拿下家庭入口。从Amazon Alexa的成功经历来看，Google Home还是蛮有机会的，基于人工智能的优势，与ChromeCast、Nest、Dropcam等业已普及的设备配合将会对Amazon Alexa构成威胁。</p>
<h3 id="Google-Allo：会假装聊天的微信"><a href="#Google-Allo：会假装聊天的微信" class="headerlink" title="Google Allo：会假装聊天的微信"></a>Google Allo：会假装聊天的微信</h3><p>Google Allo（跟我读：爱喽）可视作是Messenger的升级版。其基于谷歌联系人实现即时通信，支持表情，图片等。最大亮点是整合了谷歌智能技术，比如收到朋友发来的小狗图片，Allo可“假装”评价说“一只可爱的小狗”（貌似很无聊）。还能根据你收到的消息上下文自动推送一些常用回答方式，提升你聊天的效率…</p>
<p><img src="http://img.leikeji.com/resource/img/423b73934fab45c894d4917c96ebdea1.png" alt=""><br><strong>Google Allo与Google助理进行了整合，用户可通过语音唤醒Allo并发送消息。</strong></p>
<p>与此同时谷歌还推出了一个搭配Allo的视频应用Duo（在英语中是二重唱的意思，读成杜-欧，而不是多），一款没有太大亮点的视频聊天应用。今年夏天Android和iOS用户可使用Duo。<br><img src="http://img.leikeji.com/resource/img/7c7f32469f614c86a1c2bece9a668a2d.png" alt=""></p>
<p>总的来说，Allo这款产品还是秉承了谷歌一贯的风格：希望帮你完成尽可能多的事情。之所以要这样干，因为谷歌一直都强调对人工智能技术的应用。谷歌创始人在创立公司时就说过，谷歌不是一家搜索公司，而是一家“人工智能公司”。</p>
<h3 id="Android-N：我们真的努力在创新（cry）！"><a href="#Android-N：我们真的努力在创新（cry）！" class="headerlink" title="Android N：我们真的努力在创新（cry）！"></a>Android N：我们真的努力在创新（cry）！</h3><p>Android N并未成为本次I/O大会的重点，早在今年3月，Android N的首个预览版本就和我们见面，今天谷歌又公布了少量信息：</p>
<p>1、在性能方面，Android N集成了Vulkan，这是OpenGL的升级版，将减少游戏对GPU的要求，提升游戏性能；增加了JIT编译器，编译性能增加75%，进而使得安装程序快了75%；</p>
<p>2、在安全性上，Android N加入了文件加密功能，移动版Chrome能识别恶意网站（这个功能似乎不太好用，误识别率高，许多时候访问成人网站不方便），还有就是Google Play打造了一个SafetyNet安全网，从云端来确保App的安全可靠性；</p>
<p>3、在生产效率上，Android N也有所作为，支持双击界面切换App，支持画中画功能，支持应用分屏功能，通知中心能够实现快速回复（iOS早已支持）；</p>
<p><img src="http://img.leikeji.com/resource/img/cc227de17a334653abd0b5842ce3e392.png" alt=""><br><strong>Android N的看点不多，毕竟之前已经发布了预览版。</strong></p>
<p>作为安卓的第七个大版本，其在“功能”上已经很难大幅创新了，更多是集中在性能和安全上，而“生产效率”优化是所有移动OS都在打的牌，生活场景很好满足了就抢工作场景。</p>
<p>相对于iPad Pro和Surface这两款基于“触控笔+实体键盘”的生产力工具而言，Android N的进步太小，在Windows的Continuum模式（将手机变身电脑主机）面前也是小巫见大巫。在生产力工具这个事情上，谷歌应该还在憋大招吧，或许寄望于ChremeOS？</p>
<p>有意思的是，谷歌强调Android N的灵感主要来自用户的信息反馈，今年的Android版本最难的就是取名，将基于用户投票得出……这个做法，让雷小编（微信ID：leitech)一下就想到了小米，这不就是中国厂商鼓吹的互联网思维嘛。</p>
<p><img src="http://img.leikeji.com/resource/img/b4dd938ebe5d45d7becfc5ef0f64a1b8.png" alt=""></p>
<h3 id="Android-VR落空，但有Daydream-VR平台"><a href="#Android-VR落空，但有Daydream-VR平台" class="headerlink" title="Android VR落空，但有Daydream.VR平台"></a>Android VR落空，但有Daydream.VR平台</h3><p>I/O大会之前，国外知名科技媒体信誓旦旦地说，谷歌确定会发布一款中端VR设备——Android VR。</p>
<p>今天答案揭晓：骗人的。</p>
<p>谷歌I/O大会确实涉及到VR。其公布CardBoard这款廉价版的VR设备应用安装超过5000万，Android N已明确会加入VR模式，更重要的是，谷歌发布了VR平台Daydream.VR（白日梦）。</p>
<p>与Oculus Home等VR平台不同，Daydream不是VR内容平台，而是一套基于Android的制作VR内容和应用的标准解决方案。</p>
<p>其能有效降低延迟、减少眩晕感，支持智能手机，并可以将性能表现降低到20ms以下。基于Android N，它适用大量的手机品牌，这样以后用户通过VR盒子在这些手机上选择“VR模式”，在收看VR内容时体验就更好了——不过2K这个硬条件还是要手机厂商自己努力。</p>
<blockquote>
<p><strong>小米之前造势说会出现在Google I/O，确实出现了，见下图：</strong>      </p>
</blockquote>
<p><img src="http://img.leikeji.com/resource/img/e92c0cbc149f41d58998ff92edf910a7.png" alt=""><br><strong>Daydream.VR会支持的手机厂商</strong></p>
<p>目前，Daydream已有不少合作App，HULU、Netflix等知名内容平台加入其中，同时谷歌街景等App支持Daydream.VR。用户通过兼容Daydream.VR的App，搭载Android N手机，可以看电影、玩游戏、看街景等，会有更好的VR体验。</p>
<p>Daydream VR是一个开放式的VR解决方案。它并不是一个针对VR设备的OS，因为这套方案是基于Android N的。不过，未来Daydream VR或许会演进出一套更独立的系统，类似于Android Wear。Daydream.VR将在今年秋天正式推出。</p>
<p><img src="http://img.leikeji.com/resource/img/f43bd2244218473aa4346ba833ffdc8d.png" alt=""></p>
<p>Daydream.VR支持头戴设备，谷歌提供了关于此的参考产品（类似于Nexus产品之于Android的价值），这是一个纯白色的产品，具有简单的控制器，应该就是传说中的Android VR了，比CardBoard确实要精致点，但感觉还是比较简陋的。</p>
<p>谷歌并未正式发布这款产品，亮相应该还要等些时间。</p>
<p><img src="http://img.leikeji.com/resource/img/c54f0c1629cc45e990f9fa9e7ae9f5d3.gif" alt=""></p>
<h3 id="Android-Wear-2-0发布，可独立于手机使用"><a href="#Android-Wear-2-0发布，可独立于手机使用" class="headerlink" title="Android Wear 2.0发布，可独立于手机使用"></a>Android Wear 2.0发布，可独立于手机使用</h3><p>2014年，Android Wear正式发布，这个系统并未普及开来，除了Moto360和华为Watch支持之外，另一个明星智能手表即三星Gear采取了自家的Tizen系统。并且相对于智能手环和智能手机而言，智能手表市场一直没被打开，老大哥Apple Watch好不容易卖到千万台，今年一季度又迎来了超过60%的大幅下滑。</p>
<p>所以，智能手表何去何从，大家还是挺迷茫的。在去年I/O大会上有过小幅更新之后，Android Wear在I/O大会上发布了2.0版本。在发布时，谷歌表示，有了过去两年的教训之后，终于了解了人们对智能手表的需求。好吧，这个速度真的有点慢啊。</p>
<p>在新版中，增加了智能回复、手写识别以及全新的自动键盘。智能回复是本次I/O大会上不断强调的点，不便于输入的手表更有这样的需求，所以这个功能还是挺有吸引力的。就算要输入，通过Android Wear2.0的手写或自动键盘效率可更好，因为它们底层都应用了机器学习技术。</p>
<p>最大亮点则是，Android Wear 2.0 的手表可独立于手机使用了。它支持手表自己使用蜂窝网络和WIFI网络，还能独立播放本地音乐，独立记录运动数据，优化了运动记录算法，并与Google Fit API接口打通，可支持营养应用和蓝牙音乐。</p>
<p>Android Wear 2.0开发者预览版已经上线，正式版需要到今年秋天才会向用户推送。</p>
<p>除了谷歌助理、谷歌Home、谷歌Allo（以及Duo）、Android N、DayDream.VR和Android Wear 2.0 这6个与消费者息息相关的产品之外，谷歌针对开发者还发布了Studio2.0、Firebase等工具，以及将较多篇幅放在了基于H5技术的App形态即Android Instant Apps上，这一应用基于云端，无需安装，所见即所得，是ChromeOS的核心理念，未来或许在Android上会越来越多，而这一切对用户是透明的。</p>
<p>Google I/O 2016年虽然没有类似于Google Glass、Google无人驾驶汽车这样的“全新产品”惊艳亮相，但依然还是十分赞的，从这个大会可以看到谷歌未来的侧重点：</p>
<blockquote>
<p><strong> 1、人工智能将成为谷歌业务的“血液”。</strong>   </p>
</blockquote>
<p>这一届I/O大会让用户能够深切感知到AI技术的应用，比如谷歌助理、谷歌Home均是典型的人工智能应用。而谷歌Allo，以及Android Wear2.0都开始引入“助理”概念，谷歌正在想办法帮用户做更多的事情。AlphaGo将谷歌推上人工智能的神坛，现在谷歌正在将掌握的前沿人工各种技术应用到更多产品，造福用户。日前，桑达•劈材在最近的公开信中说，这个世界将从“移动设备优先”变为“人工智能优先”，I/O大会表明谷歌对这一世界观正在快速行动。</p>
<p><img src="http://img.leikeji.com/resource/img/dc8abc799bc94e73a72eafd6799e8201.png" alt=""></p>
<blockquote>
<p><strong>2、谷歌对待VR的态度是做标准缔造者。</strong></p>
</blockquote>
<p>谷歌对VR非常积极，去年I/O大会就推出了CardBoard并开源，以帮助VR快速普及，与Amazon、Apple的观望态度，以及微软押宝AR（增强现实）的态度，完全不同。</p>
<p>本次I/O大会虽然谷歌并未如外界期望那样做重度VR产品，但推出Daydream.VR这样的标准解决方案，对VR行业比做一款设备更具现实意义。安卓还是Nexus手机重要？答案显然是安卓。做VR设备只会是谷歌推标准的手段，而不是目的，这与Facebook押宝Oculus有巨大不同。因此，虽然Android VR没来，但做了“白日梦”的谷歌并未让人失望，它将VR当做长期投资在做，将在一起起到安卓之于智能手机行业的角色。</p>
<blockquote>
<p><strong>3、为什么没有汽车？因为I/O大会不吹牛。</strong></p>
</blockquote>
<p>这次谷歌并未如许多人预期那样发布与谷歌无人驾驶汽车相关的消息——而是聚焦在四大领域：手机、家居、可穿戴和VR，并且AI技术被贯穿其中。关于汽车几乎只字未提，是谷歌不重视汽车吗？答案是否定的，谷歌是无人驾驶汽车最激进的玩家，没有谈无人驾驶汽车或许是因为这个业务距离消费者还有很远的距离，并且I/O大会的背景是开发者大会，谷歌公布的事情与开发者均是息息相关的，现在开发者能够针对无人车做什么呢？什么都不能做。所以，谷歌在I/O大会不提汽车就不见怪了。</p>
<h3 id="小结一下："><a href="#小结一下：" class="headerlink" title="小结一下："></a>小结一下：</h3><p>谷歌I/O大会并未带来太大惊喜，但依然体现了浓浓的谷歌风格。这次大会发布了比设备更重要的VR解决方案，发布了与人工智能息息相关的软硬件，还有Android Wear 2.0、Android N以及大量的开发者工具，均表明谷歌的野心从来都不是一款产品，而是一个大家都能一起玩儿的真生态，从安卓到Chrome再到Daydream.VR，透露着浓浓的谷歌情怀</p>
<p><strong>原文链接：<a href="http://www.leikeji.com/article/5763" target="_blank" rel="external">雷科技-2016 Google IO 大会</a></strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/20/用github建立个人博客/" itemprop="url">
                  用github建立个人博客
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-20T12:53:38+08:00" content="2016-05-20">
              2016-05-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>纸上得来终觉浅，觉知此事要躬行</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/20/hello-world/" itemprop="url">
                  Hello World
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-20T10:15:55+08:00" content="2016-05-20">
              2016-05-20
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/06/MVP的简单介绍(内含第三方demo)/" itemprop="url">
                  MVP的简单介绍(内含第三方demo)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-06T15:36:13+08:00" content="2016-05-06">
              2016-05-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="MVP的简单介绍"><a href="#MVP的简单介绍" class="headerlink" title="MVP的简单介绍"></a>MVP的简单介绍</h1><h2 id="一、什么是-MVP"><a href="#一、什么是-MVP" class="headerlink" title="一、什么是 MVP"></a>一、什么是 MVP</h2><h3 id="1-MVP-的定义"><a href="#1-MVP-的定义" class="headerlink" title="1. MVP 的定义"></a>1. MVP 的定义</h3><p>MVP，全称 Model-View-Presenter<br>MVP（Model-View-Presenter，模型-视图-表示器）模式则是由IBM开发出来的一个针对C++和Java的编程模型，大概出现于2000年，是MVC模式的一个变种，主要用来隔离UI、UI逻辑和业务逻辑、数据。也就是说，MVP 是从经典的模式MVC演变而来，它们的基本思想有相通的地方：Controller/Presenter负责逻辑的处理，Model提供数据，View负责显示。</p>
<p>说明：按照View和Presenter之间的交互方式以及View本身的职责范围，Martin Folwer将MVP可分为PV（Passive View）和SoC（Supervising Controller）两种模式。</p>
<p><strong>Passive View</strong><br>顾名思义，PV（Passive View）是一个被动的View，针对包含其中的UI元素（比如控件）的操作不是由View自身来操作，而交给Presenter来操控。</p>
<p><strong>Supervising Controller</strong><br>在SoC（Supervising Controller）模式下，为了降低Presenter的复杂度，将诸如数据绑定和格式化这样简单的UI处理逻辑逻辑转移到View中，这些处理逻辑会体现在View实现的接口中。</p>
<h3 id="2-为什么使用MVP"><a href="#2-为什么使用MVP" class="headerlink" title="2. 为什么使用MVP"></a>2. 为什么使用MVP</h3><p>现在大部分的android程序只是使用了model-view的结构。<br>那么我们更多的是和view打交道，而不是解决业务逻辑。<br>当我们在代码中使用m-v的时候，到最后会发现所以的事物被连到了一起。</p>
<p><img src="http://lookcode-wordpress.stor.sinaapp.com/uploads/2016/01/16.png" alt=""></p>
<p>那么，这样之后，我们的测试或者调试将变得异常的复杂。</p>
<p><strong>With MVP</strong><br>使用MVP</p>
<p><img src="http://lookcode-wordpress.stor.sinaapp.com/uploads/2016/01/22.png" alt=""></p>
<p>复杂的任务被分成细小的任务，并且很容易解决。越小的东西，bug越少，越容易debug，更好测试。在MVP模式下的View层将会变得简单，所以即便是他请求数据的时候也不需要回调函数。View逻辑变成十分直接。</p>
<h3 id="3-MVP的优缺点"><a href="#3-MVP的优缺点" class="headerlink" title="3.MVP的优缺点"></a>3.MVP的优缺点</h3><p>任何事务都存在两面性，MVP当然也不列外，我们来看看MVP的优缺点。<br><strong>优点：</strong><br>1.降低耦合度，实现了Model和View真正的完全分离，可以修改View而不影响Modle  </p>
<ol>
<li>模块职责划分明显，层次清晰（下面会介绍Bob大叔的Clean Architecture）     </li>
<li>隐藏数据     </li>
<li>Presenter可以复用，一个Presenter可以用于多个View，而不需要更改Presenter的逻辑（当然是在View的改动不影响业务逻辑的前提下）       </li>
<li>利于测试驱动开发。以前的Android开发是难以进行单元测试的（虽然很多Android开发者都没有写过测试用例，但是随着项目变得越来越复杂，没有测试是很难保证软件质量的；而且近几年来Android上的测试框架已经有了长足的发展——开始写测试用例吧），在使用MVP的项目中Presenter对View是通过接口进行，在对Presenter进行不依赖UI环境的单元测试的时候。可以通过Mock一个View对象，这个对象只需要实现了View的接口即可。然后依赖注入到Presenter中，单元测试的时候就可以完整的测试Presenter应用逻辑的正确性。       </li>
<li>View可以进行组件化。在MVP当中，View不依赖Model。这样就可以让View从特定的业务场景中脱离出来，可以说View可以做到对业务完全无知。它只需要提供一系列接口提供给上层操作。这样就可以做到高度可复用的View组件。              </li>
<li>代码灵活性<br><strong>缺点：</strong>     </li>
<li>Presenter中除了应用逻辑以外，还有大量的View-&gt;Model，Model-&gt;View的手动同步逻辑，造成Presenter比较笨重，维护起来会比较困难。    </li>
<li>由于对视图的渲染放在了Presenter中，所以视图和Presenter的交互会过于频繁。    </li>
<li>如果Presenter过多地渲染了视图，往往会使得它与特定的视图的联系过于紧密。一旦视图需要变更，那么Presenter也需要变更了。  </li>
<li>额外的代码复杂度及学习成本。<br><strong>在MVP模式里通常包含4个要素：</strong></li>
</ol>
<p>(1) View :负责绘制UI元素、与用户进行交互(在Android中体现为Activity);<br>(2) View interface :需要View实现的接口，View通过View      interface与Presenter进行交互，降低耦合，方便进行单元测试;<br>(3) Model :负责存储、检索、操纵数据(有时也实现一个Model    interface用来降低耦合);<br>(4) Presenter :作为View与Model交互的中间纽带，处理与用户交互的负责逻辑。</p>
<p><img src="http://new.51cto.com/files/uploadimg/20090430/1559491.jpg" alt=""></p>
<h3 id="4-Android-上-MVP-的几种实现"><a href="#4-Android-上-MVP-的几种实现" class="headerlink" title="4.Android 上 MVP 的几种实现"></a>4.Android 上 MVP 的几种实现</h3><p><strong>4.1 存取用户信息的demo：<br>原文：</strong><br><a href="http://blog.csdn.net/vector_yi/article/details/24719873" target="_blank" rel="external">MVP模式在Android开发中的应用 </a><br><strong>github</strong>:<a href="https://github.com/VectorYi/MVPSample" target="_blank" rel="external">https://github.com/VectorYi/MVPSample</a></p>
<p><img src="http://img.blog.csdn.net/20140429154522203?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdmVjdG9yX3lp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></p>
<p>从这其中的目录结构我们可以看出，将MVP分的很清楚，而且可以发现，<strong>Presenter</strong>与<strong>Model</strong>、<strong>View</strong>都是通过接口来进行交互的，既降低耦合也方便进行单元测试。<br>(1) 首先我们需要一个UserBean，用来保存用户信息<br>(2) 再来看看View接口：<br>        View可以对<strong>ID</strong>、<strong>FirstName</strong>、<strong>LastName</strong>这三个EditText进行读操作，对FirstName和LastName进行写操作，由此定义IUserView接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserView</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">getID</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">String <span class="title">getFristName</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">String <span class="title">getLastName</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">setFirstName</span><span class="params">(String firstName)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">setLastName</span><span class="params">(String lastName)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(3) Model接口：<br>     同样，Model也需要对这三个字段进行读写操作，并存储在某个载体内(这不是我们所关心的，可以存在内存、文件、数据库或者远程服务器，但对于Presenter及View无影响),定义IUserModel接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserModel</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">setID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">setFirstName</span><span class="params">(String firstName)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">setLastName</span><span class="params">(String lastName)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">UserBean <span class="title">load</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(4) Presenter:<br>     至此，Presenter就能通过接口与View及Model进行交互了：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserPresenter</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> IUserView mUserView;</span><br><span class="line">	<span class="keyword">private</span> IUserModel mUserModel;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">UserPresenter</span><span class="params">(IUserView view)</span> </span>&#123;</span><br><span class="line">		mUserView = view;</span><br><span class="line">		mUserModel = <span class="keyword">new</span> UserModel();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveUser</span><span class="params">(<span class="keyword">int</span> id, String firstName, String lastName)</span> </span>&#123;</span><br><span class="line">		mUserModel.setID(id);</span><br><span class="line">		mUserModel.setFirstName(firstName);</span><br><span class="line">		mUserModel.setLastName(lastName);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadUser</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		UserBean user = mUserModel.load(id);</span><br><span class="line">		mUserView.setFirstName(user.getFirstName());</span><br><span class="line">		mUserView.setLastName(user.getLastName());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(5)UserActivity:<br>     UserActivity实现了IUserView接口，同时有一个UserPresenter成员变量：<br>可以看到，View只负责处理与用户进行交互，并把数据相关的逻辑操作都扔给了Presenter去做。而Presenter调用Model处理完数据之后，再通过IUserView更新View显示的信息。</p>
<p><strong>4.2 天气查询的 MVP 小 Demo</strong><br>原文：<a href="http://rocko.xyz/2015/02/06/Android%E4%B8%AD%E7%9A%84MVP/" target="_blank" rel="external">Android中的MVP</a><br>github:<a href="https://github.com/zhengxiaopeng/Rocko-Android-Demos/tree/master/architecture/android-mvp" target="_blank" rel="external">https://github.com/zhengxiaopeng/Rocko-Android-Demos/tree/master/architecture/android-mvp</a></p>
<p><strong>包结构</strong></p>
<p><img src="http://rocko-blog.qiniudn.com/Android%E4%B8%AD%E7%9A%84MVP_2.png?imageView2/2/w/450/h/450/q/100" alt=""></p>
<p>包图中明显的三层：Model包、Presenter包、UI包，其中，三者都实现各自的结构，Model为WeatherModel、Presenter为WeatherPresenter、View为Weather，那么具体实现类就是impl包里的了，View层的即为Activity。     </p>
<p><strong>View里面的接口：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">WeatherView</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showLoading</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">hideLoading</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showError</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setWeatherInfo</span><span class="params">(Weather weather)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>WeatherPresenter的接口：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">WeatherPresenter</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 获取天气的逻辑</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getWeather</span><span class="params">(String cityNO)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>WeatherModel接口：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">WeatherModel</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">loadWeather</span><span class="params">(String cityNO, OnWeatherListener listener)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>prestener里面还有个<strong>OnWeatherListener</strong>，其在Presenter层实现，给Model层回调，更改View层的状态，确保Model层不直接操作View层。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnWeatherListener</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 成功时回调</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> weather</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(Weather weather)</span></span>;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 失败时回调，简单处理，没做什么</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onError</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>4.3. 使用 Activity/Fragment 作为 Presenter 的探索</strong></p>
<p>上面的示例 View 都是 Activity 来承担的，Presenter 是一个普通的类，Android 在不同场景下会进入不同的生命周期，这将可能导致 Presenter 也随着其生命周期需要做出响应。从这个角度考虑，有不少开发者提出了 MVP 实现的其他思路，接下来我们要探讨的就是<strong>使用 Activity/Fragment 作为 Presenter 的一些实现方案</strong>。</p>
<p><strong>4.3.1 一种实现MVP模式的新思路</strong><br><strong>原文</strong>：<a href="https://github.com/bboyfeiyu/android-tech-frontier/tree/master/androidweekly/%E4%B8%80%E7%A7%8D%E5%9C%A8android%E4%B8%AD%E5%AE%9E%E7%8E%B0MVP%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%96%B0%E6%80%9D%E8%B7%AF" target="_blank" rel="external">一种在android中实现MVP模式的新思路</a><br><strong>源码</strong>：<a href="https://github.com/wongcain/MVP-Simple-Demo" target="_blank" rel="external">GitHub 地址</a>     </p>
<p>贴上作者对activity和fragment作为（View层）的见解：<br><strong>使用Activity和Fragment作为视图层(View)真的合适么?</strong></p>
<p>目前很多使用了MVP模式的android 项目,基本上都是将activity和fragment作为视图层来进行处理的.而presenters通常是通过继承自被视图层实例化或者注入的对象来得到的. 诚然,我同意说,这种方式可以节省掉很多让人厌烦的”import android..”语句, 并且将presenters从activity的生命周期中分割出来以后, 项目后续的维护会变得简便很多.这种思路是正确的， 但是,从另一个角度来说, activity 有一个很复杂的生命周期(fragment的生命周期可能会更复杂), 而这些生命周期很有可能对你项目的业务逻辑有非常重大的影响. Activity 可以获取上下文环境和多种android系统服务. Activity中发送Intent，启动Service和执行FragmentTransisitons等。而这些特性在我看来绝不应该是视图层应该涉及的领域(视图的功能就是现实数据和从用户那里获取输入数据，在理想的情况下，视图应该避免业务逻辑).      </p>
<p>基于上述的原因，我对目前的主流做法并不赞同，所以我在尝试使用Activity和Fragment作为Presenters。</p>
<p><strong>1. 去除所有的view</strong></p>
<p>将Activity和Fragment作为presenter最大的困难就是如何将关于UI的逻辑抽取出来.我的解决方案是: 让需要作为presenter的activity 或者 fragment来继承一个抽象的类(或者叫”基类”), 这样关于View 各种组件的初始化以及逻辑,都可以在继承了抽象类的方法中进行操作，而当继承了该抽象类的class需要对某些组件进行操作的时候，只需要调用继承自抽象类的方法，就可以了。<br>那么抽象类怎么获取到的view组件呢？在抽象类里面会有一个实例化的接口，这个接口里面的init()方法就会对view进行实例化，这个接口如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Vu</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(LayoutInflater inflater, ViewGroup container)</span></span>;</span><br><span class="line">    <span class="function">View <span class="title">getView</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>正如你所见，Vu定义了一个通用的初始化例程，我可以通过它来实现一个容器视图，它也有一个方法来获得一个View的实例，每一个presenter将会和它自己的Vu关联，这个presenter将会继承这个接口（直接或者间接的去继承一个来自Vu的接口）</p>
<p><strong>2. 创建一个presenter基类 (Activity)</strong></p>
<p>有了Vu接口，我们可以通过构建一系列的class来操纵很多不同的view组件，这些class 使用Vu接口来初始化View组件，并通过继承的方式给子类以操纵view组件的方法，以此来达到将ui 逻辑剥离出activity的目的。</p>
<p>在下面的代码中，你可以看到，我覆写了activity的onCreate 、 onCreateView、onDestroy 、 onDestroyView，通过对这些方法的覆写，就可以对Vu的实例化和销毁进行精确的控制（vu.init()就是实例化一个view组件）。</p>
<p>onBindVu() 和onDestoryVu()是控制view生命周期的两个方法。通过对actiivty中相关方法的覆写达到控制组件的生命周期的目的（具体看下面的代码，你就明白了）， 这样做的好处就是无论是activity 还是 fragment， 其用与控制view组件创建和销毁的语句是一样的（尽量避免定义多余的函数）。这样的话，二者之间的切换也会减少一定的阻力（也许你今天的需求是用fragment实现的，但是第二天发现使用fragment会有一个惊天bug，译者本人就遇到过）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BasePresenterActivity</span>&lt;<span class="title">V</span> <span class="keyword">extends</span> <span class="title">Vu</span>&gt; <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> V vu;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            vu = getVuClass().newInstance();</span><br><span class="line">            vu.init(getLayoutInflater(), <span class="keyword">null</span>);</span><br><span class="line">            setContentView(vu.getView());</span><br><span class="line">            onBindVu();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        onDestroyVu();</span><br><span class="line">        vu = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> Class&lt;V&gt; <span class="title">getVuClass</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onBindVu</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroyVu</span><span class="params">()</span> </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3. 创建一个基本的presenter(Fragment)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BasePresenterFragment</span>&lt;<span class="title">V</span> <span class="keyword">extends</span> <span class="title">Vu</span>&gt; <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> V vu;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        View view = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            vu = getVuClass().newInstance();</span><br><span class="line">            vu.init(inflater, container);</span><br><span class="line">            onBindVu();</span><br><span class="line">            view = vu.getView();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (java.lang.InstantiationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">onDestroyView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        onDestroyVu();</span><br><span class="line">        vu = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">super</span>.onDestroyView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroyVu</span><span class="params">()</span> </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onBindVu</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> Class&lt;V&gt; <span class="title">getVuClass</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>4. 一个简单的例子</strong></p>
<p>如前文所述，我们已经确定了一个框架，现在就来写一个简单的例子来进一步的说明. 为了避免篇幅过长，我就写一个“hello world”的例子。首先要有一个实现Vu接口的类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloVu</span> <span class="keyword">implements</span> <span class="title">Vu</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">View view;</span><br><span class="line">TextView helloView;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(LayoutInflater inflater, ViewGroup container)</span> </span>&#123;</span><br><span class="line">    view = inflater.inflate(R.layout.hello, container, <span class="keyword">false</span>);</span><br><span class="line">    helloView = (TextView) view.findViewById(R.id.hello);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> view;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHelloMessage</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">    helloView.setText(msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>下一步</strong>，创建一个presenter来操作这个TextView</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloActivity</span> <span class="keyword">extends</span> <span class="title">BasePresenterActivity</span> </span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onBindVu</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    vu.setHelloMessage(<span class="string">"Hello World!"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> Class&lt;HelloVu&gt; <span class="title">getVuClass</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> HelloVu.class;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>OK,这样就大功告成了！！是不是很简便！<br><strong>等等…耦合警告!</strong></p>
<p>你可能注意到我的HelloVu类直接实现了Vu接口，我的<strong>Presenter</strong>的<strong>getVuClass</strong>方法直接引用了实现类。传统的MVP模式中，Presenter是要通过接口与他们的View解耦合的。因此，你也可以这么做。避免直接实现Vu接口，我们可以创建一个扩展了Vu的<strong>IHelloView</strong>接口，然后使用这个接口作为Presenter的泛型类型。这样Presenter看起来应该是如下这样的 :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloActivity</span> <span class="keyword">extends</span> <span class="title">BasePresenterActivity</span>&lt;<span class="title">IHelloVu</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onBindVu</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        vu.setHelloMessage(<span class="string">"Hello World!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Class&lt;HelloVuImpl&gt; <span class="title">getVuClass</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> HelloVuImpl.class;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在我使用强大的模拟工具过程中，我个人并没有看到在一个接口下面实现Vu所带来的好处。但是对于我来说一个好的方面是，有没有Vu接口它都能够工作，唯一的需求就是最终你会实现Vu。<br>使用adapter作为presenter</p>
<p>将Activity作为presente已经足够狡猾了吧？使用adapter作为presenter，你想过没有？ 好吧，请看如下的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BasePresenterAdapter</span> <span class="keyword">extends</span> <span class="title">BaseAdapter</span> </span>&#123;</span><br><span class="line"><span class="keyword">protected</span> V vu;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(convertView == <span class="keyword">null</span>) &#123;</span><br><span class="line">        LayoutInflater inflater = (LayoutInflater) parent.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            vu = (V) getVuClass().newInstance();</span><br><span class="line">            vu.init(inflater, parent);</span><br><span class="line">            convertView = vu.getView();</span><br><span class="line">            convertView.setTag(vu);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        vu = (V) convertView.getTag();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(convertView!=<span class="keyword">null</span>) &#123;</span><br><span class="line">        onBindListItemVu(position);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> convertView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">onBindListItemVu</span><span class="params">(<span class="keyword">int</span> position)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> Class&lt;V&gt; <span class="title">getVuClass</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>4.3.2. TheMVP 介绍</strong></p>
<p><strong>TheMVP</strong>使用Activity作为Presenter层来处理代码逻辑，通过让Activity包含一个<strong>ViewDelegate</strong>对象来间接操作View层对外提供的方法，从而做到完全解耦视图层。</p>
<p><strong>原文</strong>：<a href="http://www.kymjs.com/code/2015/11/09/01/" target="_blank" rel="external">用MVP架构开发Android应用</a><br><strong>源码</strong>：<a href="https://github.com/kymjs/TheMVP" target="_blank" rel="external">GitHub 地址</a></p>
<p><strong>TheMVP</strong>使用Activity作为Presenter层来处理代码逻辑，通过让Activity包含一个<strong>ViewDelegate</strong>对象来间接操作View层对外提供的方法，从而做到完全解耦视图层。如下图：<br><strong>TheMVP架构图</strong><br><img src="http://kymjs.com/images/blog_image/20151029_1.png" alt=""></p>
<p>要将Activity作为Presenter来写，需要让View变得可复用，必须解决的一个问题就是setContentView()如何调用，因为它是Activity(Fragment有类似)的方法。<br>我们需要把视图抽离出来独立实现。可以定义一个接口，来限定View层必须实现的方法(这个接口定义，也就是View层的代理对象)，例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IDelegate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">create</span><span class="params">(LayoutInflater i, ViewGroup v, Bundle b)</span></span>;</span><br><span class="line">    <span class="function">View <span class="title">getRootView</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>首先通过<strong>inflater</strong>一个布局，将这个布局转换成<strong>View</strong>，再用g<strong>etRootView()</strong>方法把这个<strong>View</strong>返回给<strong>Presenter</strong>层，让<strong>setContentView(view)</strong>去调用，这样就实现了<strong>rootView</strong>的独立。<br>所以，在Presenter层，我们的实现应该是：  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//获取到视图层对象</span></span><br><span class="line">    IDelegate viewDelegate = xxx;</span><br><span class="line">    <span class="comment">//让视图层初始化(如果是Fragment，就需要传递onCreateView方法中的三个参数)</span></span><br><span class="line">    viewDelegate.create(getLayoutInflater(), <span class="keyword">null</span>, savedInstanceState);</span><br><span class="line">    <span class="comment">//拿到初始化以后的rootview，并设置content</span></span><br><span class="line">    setContentView(viewDelegate.getRootView());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>使用泛型解耦</strong></p>
<p>现在我们是实现了<strong>View</strong>与<strong>Presenter</strong>的解耦，在onCreate中包含了一个接口对象来实现我们固定的一些必须方法。但是又引入了问题：一些特定方法没办法引用了。比如某个界面的设值、控件的修改显示逻辑对Presenter层的接口，接口对象必须强转成具体子类才能调用。<br>解决办法：可以通过泛型来解决直接引用具体对象的问题。比如我们可以在子类定义以后确定一个Presenter中所引用的<strong>Delegate</strong>的具体类型。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ActivityPresenter</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">IDelegate</span>&gt; <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> T viewDelegate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        viewDelegate = getDelegateClass().newInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> Class&lt;T&gt; <span class="title">getDelegateClass</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样我们在ActivityPresenter的继承类中就可以通过动态设置getDelegateClass()的返回值来确定Delegate的具体类型了。</p>
<p><strong>4.3.3 MVPro 介绍</strong></p>
<p><strong>MVPro</strong>的实现很简单，思想和上面两篇文章介绍的一样，都是将<strong>Activity</strong>和<strong>Fragment</strong>作为<strong>Presenter</strong>。<strong>Presenter</strong>即我们的<strong>Activity</strong>或者<strong>Fragment</strong>, View呢？说白了就是我们从Activity和Fragment中提取出来的和View操作相关的代码。</p>
<p><strong>原文</strong>：<a href="http://blog.csdn.net/qibin0506/article/details/49992897" target="_blank" rel="external">Android MVP框架MVPro的使用和源码分析</a><br><strong>源码</strong>：<a href="https://github.com/qibin0506/MVPro" target="_blank" rel="external">GitHub 地址</a></p>
<p><img src="http://www.mobile-open.com/wp-content/uploads/2016/04/20160405194433_243.png" alt=""></p>
<p>在<strong>MVPro</strong>中，将Activity，Fragment作为Presenter，并且提供了轻量级的<strong>ActivityPresenterImpl</strong>、<strong>FragmentPresenterImpl</strong>、<strong>FragmentActivityImpl</strong>的实现， 在项目中可以直接继承这些实现去做自己的presenter。<br>IPresenter作为Presenter必须要实现的接口，提供的方法有：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 获取当前presenter泛型的类型</span><br><span class="line"> * <span class="doctag">@return</span></span><br><span class="line"> */</span></span><br><span class="line"><span class="function">Class&lt;T&gt; <span class="title">getViewClass</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * View初始化之前可以在此方法做一些操作</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">create</span><span class="params">(Bundle savedInstance)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * View初始化完毕后调用</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">created</span><span class="params">(Bundle savedInstance)</span></span>;</span><br></pre></td></tr></table></figure>
<p>其中getViewClass在Ipresenter的实现类中已经完成了实现，我们的项目中无需考虑.<br>create方法是在setContentView之前调用的，我们可以在该方法中实现<br>例如：requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);<br>等工作。<br>created方法是在setContentView之后调用，可以根据业务需要做自己的逻辑。</p>
<p><strong>**View</strong></p>
<p>在<strong>MVPro</strong>中，<strong>View</strong>层必须要实现IView接口，当然<strong>MVPro</strong>也提供了<strong>ViewImpl</strong>一个轻量级的实现，在我们的项目中完全可以直接继承<strong>ViewImpl</strong>。<br>Model</p>
<p>在MVPro中并没有提供关于model的代码</p>
<p><strong>4.4. Mosby 框架</strong></p>
<p>这是一种解决Activity/Fragment生命周期在屏幕翻转等场景下对Presenter的处理的思路。</p>
<p><strong>原文</strong>：<a href="http://hannesdorfmann.com/android/mosby" target="_blank" rel="external">Ted Mosby – Software Architect</a><br><strong>译文</strong>：<a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0528/2945.html" target="_blank" rel="external">MVP框架 – Ted Mosby的软件架构</a><br><strong>源码</strong>：<a href="https://github.com/sockeqwe/mosby" target="_blank" rel="external">GitHub 地址</a></p>
<p><strong>MVP模块( MVP Module )</strong><br>Mosby库中的MVP模块使用泛型来确保类型安全。所有view的基类是MvpView。从根本上说这只是一个空的interface 。Presenter的基类是MvpPresenter：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MvpView</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MvpPresenter</span>&lt;<span class="title">V</span> <span class="keyword">extends</span> <span class="title">MvpView</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@UiThread</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">attachView</span><span class="params">(V view)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@UiThread</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">detachView</span><span class="params">(<span class="keyword">boolean</span> retainInstance)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们把Activity和Fragment看做View。因此Mosby库的MVP模块提供了 属于MvpViews 的MvpActivity和MvpFragment作为Activity和Fragment的基类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">MvpActivity</span>&lt;<span class="title">P</span> <span class="keyword">extends</span> <span class="title">MvpPresenter</span>&gt; <span class="keyword">extends</span> <span class="title">MosbyActivity</span> <span class="keyword">implements</span> <span class="title">MvpView</span></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> P presenter;</span><br><span class="line">    <span class="meta">@Override</span>  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        presenter = createPresenter();</span><br><span class="line">        presenter.attachView(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line"></span><br><span class="line">        presenter.detachView(<span class="keyword">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="title">PcreatePresenter</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">MvpFragment</span>&lt;<span class="title">P</span> <span class="keyword">extends</span> <span class="title">MvpPresenter</span>&gt; <span class="title">MosbyFragment</span> <span class="keyword">implements</span> <span class="title">MvpView</span></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> Ppresenter;</span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewCreated</span><span class="params">(View view,@Nullable Bundle savedInstanceState)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onViewCreated(view,savedInstanceState);</span><br><span class="line">        <span class="comment">// Create the presenter if needed</span></span><br><span class="line">        <span class="keyword">if</span>(presenter == <span class="keyword">null</span>)&#123;</span><br><span class="line">            presenter = createPresenter();</span><br><span class="line">        &#125;</span><br><span class="line">        presenter.attachView(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroyView</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroyView();</span><br><span class="line">        presenter.detachView(getRetainInstance());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="title">PcreatePresenter</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这一理念主要是一个<strong>MvpView</strong> (也就是Fragment or Activity)会关联一个<strong>MvpPresenter</strong>，并且管理<strong>MbpPresenter</strong>的声明周期。大家从上面的代码片段可以看到，<strong>Mosby</strong>使用Activity和Fragement生命周期来实现这一目的。通常presenter是绑定在该生命周期上的。所以初始化或者清理一些东西等操作（例如撤销异步运行任务）应该在 <strong>presenter.onAttach()</strong>和 <strong>resenter.onDetach()</strong> 上进行。 <strong>MvpPresenter</strong>是一个interface 。MVP模块提供一个 <strong>MvpBasePresenter</strong>，这个MvpBasePresenter只持有View（是一个Fragment或Activity）的弱引用，从而避免内存泄露。因此，当presenter想要调用view方法时，我们需要查看<strong>isViewAttached()</strong> 并使用<strong>getView()</strong>来获取引用，以检查view是否连接到了presenter。</p>
<p><strong>4.5. Google 官方推荐</strong></p>
<p>大 Boss 总是最后出场，对于 Android 上 MVP 的实现，Google 给也出了一些建议和实例，赶紧看看去吧。</p>
<p><strong>原文</strong>：<a href="https://github.com/googlesamples/android-architecture?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">Android Architecture Blueprints [beta]</a><br><strong>源码</strong>：<a href="https://github.com/googlesamples/android-architecture?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">GitHub 地址</a></p>
<p><img src="https://github.com/googlesamples/android-architecture/wiki/images/tasks2.png" alt=""></p>
<p><strong>Google MVP 示例</strong></p>
<p><strong>4.6. MVP 实现的完整开源项目</strong></p>
<p><strong>Philm</strong></p>
<p><strong>ChrisBannes</strong>的开源项目<strong>Philm</strong>，其整体架构是一套MVP的实现。</p>
<p><strong>Philm 分析</strong>：<a href="http://www.lightskystreet.com/2015/02/10/philm_mvp/" target="_blank" rel="external">开源项目Philm的MVP架构分析</a><br><strong>源码</strong>：<a href="https://github.com/chrisbanes/philm" target="_blank" rel="external">GitHub 地址</a></p>
<p><img src="http://www.lightskystreet.com/img/philm_mvp/philm_mvp_structure.png" alt=""></p>
<p><img src="http://www.lightskystreet.com/img/philm_mvp/philm_mvp_uml.png" alt=""></p>
<p><img src="http://www.lightskystreet.com/img/philm_mvp/mvp_method_flow.png" alt=""></p>
<p><strong>相关文章</strong></p>
<p><a href="http://blog.csdn.net/vector_yi/article/details/24719873" target="_blank" rel="external">http://blog.csdn.net/vector_yi/article/details/24719873</a></p>
<p><a href="http://antonioleiva.com/mvp-android/" target="_blank" rel="external">http://antonioleiva.com/mvp-android/</a></p>
<p><a href="https://github.com/antoniolg/androidmvp" target="_blank" rel="external">https://github.com/antoniolg/androidmvp</a></p>
<p><a href="http://fernandocejas.com/2014/09/03/architecting-android-the-clean-way/" target="_blank" rel="external">http://fernandocejas.com/2014/09/03/architecting-android-the-clean-way/</a></p>
<p><a href="https://github.com/android10/Android-CleanArchitecture" target="_blank" rel="external">https://github.com/android10/Android-CleanArchitecture</a></p>
<p><a href="http://magenic.com/BlogArchive/AnMVPPatternforAndroid" target="_blank" rel="external">http://magenic.com/BlogArchive/AnMVPPatternforAndroid</a></p>
<p><a href="http://blog.8thlight.com/uncle-bob/2012/08/13/the-clean-architecture.html" target="_blank" rel="external">http://blog.8thlight.com/uncle-bob/2012/08/13/the-clean-architecture.html</a></p>
<p><a href="http://blog.csdn.net/xijiaohuangcao/article/details/7925641" target="_blank" rel="external">http://blog.csdn.net/xijiaohuangcao/article/details/7925641</a></p>
<p><a href="https://github.com/pedrovgs/EffectiveAndroidUI/" target="_blank" rel="external">https://github.com/pedrovgs/EffectiveAndroidUI/</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="sourfeng" />
          <p class="site-author-name" itemprop="name">sourfeng</p>
          <p class="site-description motion-element" itemprop="description">Time goes by so fast, people go in and out of your life. You must never miss the opportunity to tell these people how much they mean to you.</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/归档">
              <span class="site-state-item-count">4</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/分类">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/标签">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">sourfeng</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  



  
  
  

  

  

</body>
</html>
